(function(e,i){var a,b;var f=function(){b=new google.maps.LatLng(37.544577320855815,127.02392578125);a=new google.maps.Map(document.getElementById("map"),{zoom:13,center:b,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDoubleClickZoom:true});
};var n=e("#SearchFormSpatial");var o=e("#SearchFormFormula");var j=e("#SearchFormAutocomplete");var h=null;var m=false;var l=null;var d=function(g){if(m){return;
}m=true;e.ajax({type:"GET",url:"http://localhost:5000/ajax/getPolygon",data:{formula:g},success:function(q){console.log(i.Geometry.text2geo(q.result));
var p=new GeoJSON(i.Geometry.text2geo(q.result),{strokeColor:"#0000ff",strokeOpacity:0.8,strokeWeight:2,fillColor:"#0000ff",fillOpacity:0.35});console.log(p);
p.setMap(a);m=false;return;if(l!==null){(function(r){r.setMap(null);})(l);}l=p;l.setMap(a);return;}});};var k=function(){var s=n.find("div.group");var u="";
for(var r=0,g=s.length;r<g;r++){var q=s.eq(r);var p=q.find("input.spatial-name").data("idx");var t=q.find("select.spatial-operator").find("option:selected").val();
u+=p;u+=t;if(t==="="){break;}}d(u);};j.find("ul").on("click","li",function(){var g=e(this).data("idx");h.data("idx",g);h.val(e(this).data("name"));j.find("ul").empty();
k();});e("#SearchForm").bind("submit",function(g){g.preventDefault();e.ajax({type:"GET",url:"http://localhost:5000/ajax/searchResult",data:e(this).serialize(),success:function(p){if(p.result==false){return;
}if(p.result.length==0){return;}console.log(p.result);}});});n.on("keyup","input",function(){h=e(this);var g=e(this).val();j.css("left",e(this).offset().left);
i.autocompleteSpatial(g);});var c=n.html();n.on("change","select",function(){var p=e(this).parent();k();if(e(this).find("option:selected").val()==="="){p.nextAll().addClass("hidden");
return;}if(p.next().length!==0){var g=p.next();while(true){g.removeClass("hidden");if(g.find("select.spatial-operator").find("option:selected").val()==="="){break;
}g=g.next();}return;}n.append(c);});f();})(jQuery,window);